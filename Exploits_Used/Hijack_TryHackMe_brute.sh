#!/bin/bash

if [ $# -ne 2 ]; then
    echo "Usage: $0 <password_file> <output_file>"
    exit 1
fi

PASSWORD_FILE=$1
OUTPUT_FILE=$2

if [[ ! -f "$PASSWORD_FILE" ]]; then
    echo "Password file not found!"
    exit 1
fi

> "$OUTPUT_FILE" 

while IFS= read -r password; do
    md5_hash=$(echo -n "$password" | md5sum | awk '{print $1}')
    pair="admin:$md5_hash"
    base64_encoded=$(echo -n "$pair" | base64)
    url_encoded=$(python3 -c "import urllib.parse; print(urllib.parse.quote('$base64_encoded'))")
    echo "$url_encoded" >> "$OUTPUT_FILE"
done < "$PASSWORD_FILE"

echo "Encoded passwords saved to $OUTPUT_FILE"